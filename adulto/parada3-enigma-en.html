<!DOCTYPE html>
<html lang="en" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter III: Al-Andalus - The Manuscript</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg-color: #121212; --card-bg: #1e1e1e; --text-main: #e0d6c2; --text-muted: #a8a095; --accent: #c0392b; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: var(--bg-color); color: var(--text-main); font-family: 'Lato', sans-serif; line-height: 1.6; padding: 20px; max-width: 600px; margin: 0 auto; }
        h1, h3 { font-family: 'Cinzel', serif; color: #fff; letter-spacing: 1px; }
        h1 { font-size: 1.8rem; text-align: center; margin-bottom: 10px; border-bottom: 2px solid var(--accent); padding-bottom: 10px; }
        .subtitle { text-align: center; font-size: 0.9rem; color: var(--text-muted); margin-bottom: 25px; text-transform: uppercase; }
        .img-container { width: 100%; max-height: 250px; background-color: #333; border-radius: 8px; margin-bottom: 20px; overflow: hidden; border: 1px solid #444; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .card { background-color: var(--card-bg); padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .narrative-text { font-style: italic; border-left: 3px solid var(--accent); padding-left: 15px; margin-top: 15px; color: #dcdcdc; }
        .enigma-box { background-color: #2c2c2c; border: 1px solid var(--accent); padding: 20px; border-radius: 8px; margin-top: 20px; text-align: center; }
        .enigma-icon { font-size: 2rem; margin-bottom: 10px; display: block; }
        input[type="number"] { width: 100%; padding: 15px; font-size: 1.5rem; font-family: 'Cinzel', serif; background-color: #1a1a1a; border: 2px solid #444; color: white; border-radius: 8px; margin: 15px 0; text-align: center; }
        .btn { width: 100%; padding: 15px; font-size: 1rem; font-weight: bold; text-transform: uppercase; border: none; border-radius: 8px; cursor: pointer; font-family: 'Cinzel', serif; }
        .btn-primary { background-color: var(--accent); color: white; }
        .info-toggle { background: none; border: none; color: var(--text-muted); text-decoration: underline; cursor: pointer; font-size: 0.9rem; margin-top: 15px; display: block; width: 100%; }
        .info-content { display: none; margin-top: 15px; font-size: 0.9rem; background: #151515; padding: 15px; border-radius: 8px; text-align: left; }
        #feedback-msg { margin-top: 15px; font-weight: bold; min-height: 1.5em; color: var(--accent); }
    </style>
</head>
<body>
    <header>
        <h1>Chapter III: The Stone Frontier</h1>
        <div class="subtitle">Plaça Ramon Berenguer el Gran</div>
    </header>
    <div class="img-container">
        <img src="../imagenes/alandalus.jpg" alt="Equestrian statue of Ramon Berenguer">
    </div>
    <section class="card">
        <p>“You are before an iconic image: the Count who rides eternally upon the Roman wall. His figure marks the historical frontier between the Christian world and the power of Al-Andalus.”</p>
        <p class="narrative-text">“Approach the base of the statue and read his full name carved in stone. It seems simple, but Latin hides traps for the modern eye. One of its letters is not what it seems.”</p>
    </section>
    <div id="enigma-container">
        <section class="enigma-box">
            <span class="enigma-icon">⚔️</span>
            <h3>The Latin Trap</h3>
            <p>“Sum the numerical value of <strong>ALL</strong> the Roman numerals you find hidden in the stone inscription (Name + Surname + Numeral).”</p>
            <p>“Attention! Remember that in Latin the letter 'U' was written with the shape of a number...”</p>
            <label for="answer" style="display:none;">Your answer</label>
            <input type="number" id="answer" placeholder="Enter the total sum">
            <button class="btn btn-primary" onclick="checkAnswer()">Validate Figure</button>
            <div id="feedback-msg"></div>
            <button id="hint-toggle-btn" class="info-toggle" onclick="toggleHint()" style="display:none;">Numbers don't add up?</button>
            <div id="hint-box" class="info-content">
                <p>1. Look for the <strong>M</strong> in RAMON (1000).</p>
                <p>2. Look for the <strong>V</strong> in BERENGVER (5). Yes, the U is written as V and sums 5!</p>
                <p>3. Look for the final <strong>III</strong> (3).</p>
                <p>The operation is: 1000 + 5 + 3.</p>
            </div>
        </section>
    </div>
    <script>
        const SOLUTION = 1008;
        let failCount = 0;
        function checkAnswer() {
            const userIn = document.getElementById('answer').value;
            const val = parseInt(userIn);
            const feedback = document.getElementById('feedback-msg');
            const hintButton = document.getElementById('hint-toggle-btn');
            if (val === SOLUTION) {
                window.location.href = 'parada3-recompensa-en.html';
            } else {
                failCount++;
                if (val === 1003) {
                    feedback.textContent = "Almost... Did you forget that 'U' in Latin is a 'V'? That letter also counts.";
                } else {
                    feedback.textContent = "Incorrect calculation. Check all the letters in the name carefully.";
                }
                if (failCount >= 3) {
                    hintButton.style.display = 'block';
                }
            }
        }
        function toggleHint() {
            const box = document.getElementById('hint-box');
            box.style.display = box.style.display === 'block' ? 'none' : 'block';
        }
    </script>
</body>
</html>