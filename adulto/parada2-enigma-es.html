<!DOCTYPE html>
<html lang="es" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cap√≠tulo II: Visigodos - El Manuscrito</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg-color: #121212; --card-bg: #1e1e1e; --text-main: #e0d6c2; --text-muted: #a8a095; --accent: #c0392b; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: var(--bg-color); color: var(--text-main); font-family: 'Lato', sans-serif; line-height: 1.6; padding: 20px; max-width: 600px; margin: 0 auto; }
        h1, h3 { font-family: 'Cinzel', serif; color: #fff; letter-spacing: 1px; }
        h1 { font-size: 1.8rem; text-align: center; margin-bottom: 10px; border-bottom: 2px solid var(--accent); padding-bottom: 10px; }
        .subtitle { text-align: center; font-size: 0.9rem; color: var(--text-muted); margin-bottom: 25px; text-transform: uppercase; }
        .img-container { width: 100%; max-height: 250px; background-color: #333; border-radius: 8px; margin-bottom: 20px; overflow: hidden; border: 1px solid #444; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .card { background-color: var(--card-bg); padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .narrative-text { font-style: italic; border-left: 3px solid var(--accent); padding-left: 15px; margin-top: 15px; color: #dcdcdc; }
        .enigma-box { background-color: #2c2c2c; border: 1px solid var(--accent); padding: 20px; border-radius: 8px; margin-top: 20px; text-align: center; }
        .enigma-icon { font-size: 2rem; margin-bottom: 10px; display: block; }
        input[type="text"] { width: 100%; padding: 15px; font-size: 1.5rem; font-family: 'Cinzel', serif; background-color: #1a1a1a; border: 2px solid #444; color: white; border-radius: 8px; margin: 15px 0; text-align: center; text-transform: uppercase; }
        .btn { width: 100%; padding: 15px; font-size: 1rem; font-weight: bold; text-transform: uppercase; border: none; border-radius: 8px; cursor: pointer; font-family: 'Cinzel', serif; }
        .btn-primary { background-color: var(--accent); color: white; }
        .info-toggle { background: none; border: none; color: var(--text-muted); text-decoration: underline; cursor: pointer; font-size: 0.9rem; margin-top: 15px; display: block; width: 100%; }
        .info-content { display: none; margin-top: 15px; font-size: 0.9rem; background: #151515; padding: 15px; border-radius: 8px; text-align: left; }
        #feedback-msg { margin-top: 15px; font-weight: bold; min-height: 1.5em; color: var(--accent); }
    </style>
</head>
<body>
    <header>
        <h1>Cap√≠tulo II: La Torre del Vig√≠a</h1>
        <div class="subtitle">Pla√ßa del Rei ¬∑ Palau Reial Major</div>
    </header>

    <!-- Aseg√∫rate de tener una foto de la plaza o la torre llamada 'visigodos.jpg' -->
    <div class="img-container">
        <img src="../imagenes/visigodos.jpg" alt="Pla√ßa del Rei y Torre del Rei Mart√≠">
    </div>

    <section class="card">
        <p>‚ÄúHas llegado al coraz√≥n noble de la ciudad. Aunque los muros que ves son medievales, se asientan sobre los cimientos de la Barcelona Visigoda (Barchinona).‚Äù</p>
        <p class="narrative-text">‚ÄúLos reyes visigodos duermen bajo tierra, ocultos en la oscuridad. Pero sobre ellos, los reyes medievales quisieron tocar el cielo. Alza la vista hacia la torre rectangular llena de ventanales que domina la plaza en una esquina. Es el mirador del Rey Mart√≠ el Humano.‚Äù</p>
    </section>

    <div id="enigma-container">
        <section class="enigma-box">
            <span class="enigma-icon">üè∞</span>
            <h3>La Contrase√±a Real</h3>
            <p>‚ÄúPara descifrar la siguiente capa, necesitas un c√≥digo de acceso. Combina el <strong>NOMBRE</strong> del rey constructor de la torre (en catal√°n, sin tilde) seguido del <strong>N√öMERO</strong> de pisos de galer√≠as (ventanales) que tiene la torre.‚Äù</p>
            <p style="font-size:0.8rem; color:#aaa;">(Ejemplo: Si fuera el Rey Jaime y tuviera 3 pisos, ser√≠a JAIME3)</p>
            
            <label for="answer" style="display:none;">Tu respuesta</label>
            <input type="text" id="answer" placeholder="Introduce el c√≥digo">
            
            <button class="btn btn-primary" onclick="checkAnswer()">Validar C√≥digo</button>
            
            <div id="feedback-msg"></div>

            <button class="info-toggle" onclick="toggleHint()">¬øNecesitas ayuda?</button>
            
            <div id="hint-box" class="info-content">
                <p>1. El Rey es <strong>MART√ç</strong> (Mart√≠n el Humano).</p>
                <p>2. Cuenta los niveles de arcos de la torre: son <strong>5</strong>.</p>
                <p>3. El c√≥digo es: MARTI5</p>
            </div>
        </section>
    </div>

    <script>
        // Soluci√≥n: MARTI5
        const SOLUTION = "MARTI5"; 

        function checkAnswer() {
            // Normalizamos: may√∫sculas, sin espacios y sin tildes (MART√ç -> MARTI)
            let userInput = document.getElementById('answer').value.toUpperCase().trim();
            userInput = userInput.normalize("NFD").replace(/[\u0300-\u036f]/g, "");

            if (userInput === SOLUTION) {
                window.location.href = 'parada2-recompensa-es.html';
            } else {
                document.getElementById('feedback-msg').textContent = "C√≥digo incorrecto. Cuenta bien los pisos.";
            }
        }

        function toggleHint() {
            const box = document.getElementById('hint-box');
            box.style.display = box.style.display === 'block' ? 'none' : 'block';
        }
    </script>
</body>
</html>